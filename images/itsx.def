Bootstrap: debootstrap
OSVersion: bionic
MirrorURL: http://us.archive.ubuntu.com/ubuntu/

%help
    # This is a container containing ITSx

%post
    # installing prerequisites needed for installation
    cat /etc/apt/sources.list
    sed -i 's/$/ universe/' /etc/apt/sources.list
    export LC_ALL=C
    export LANG=C
    apt-get update && apt-get install -y \
    apt-utils locales vim wget build-essential perl hmmer
    rm -rf /var/lib/apt/lists/*
    apt-get clean
    
    wget https://microbiology.se/sw/ITSx_1.1.2.tar.gz
    tar -xvzf ITSx_1.1.2.tar.gz
    rm ITSx_1.1.2.tar.gz
    cd ITSx_1.1.2
    perl ITSx
    export PATH="$PATH:/ITSx_1.1.2/" >> ~/.bashrc
    export PATH="$PATH:/" >> ~/.bashrc
    echo $PATH

%environment
    export LC_ALL=C.UTF-8
    export LANG=C.UTF-8
    export PATH="$PATH:/ITSx_1.1.2/" >> ~/.bashrc
    export PATH="$PATH:/" >> ~/.bashrc

%test
    export LC_ALL=C.UTF-8
    export LANG=C.UTF-8
    export PATH="$PATH:/ITSx_1.1.2/"
    export PATH="$PATH:/"
    ITSx -i test.fasta -o test

%labels
    Version: 1
    Maintainer "Kelly Styles" <kelly.styles@vuw.ac.nz>

